{"version":3,"sources":["webpack:///./src/components/Settings.vue?b805","webpack:///src/components/Settings.vue","webpack:///./src/components/Settings.vue?d457","webpack:///./src/components/Settings.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","openSignInWindow","_v","staticRenderFns","methods","component","VCard","VCol","VContainer","VIcon","VListItem","VListItemContent","VList","VListItemIcon","VListItemTitle","VRow"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACE,YAAY,eAAe,CAACF,EAAG,QAAQ,CAACG,MAAM,CAAC,QAAU,SAAS,MAAQ,WAAW,CAACH,EAAG,QAAQ,CAACG,MAAM,CAAC,KAAO,OAAO,CAACH,EAAG,SAAS,CAACE,YAAY,UAAUC,MAAM,CAAC,SAAW,GAAG,MAAQ,UAAU,YAAY,UAAU,CAACH,EAAG,cAAc,CAACG,MAAM,CAAC,KAAO,IAAIC,GAAG,CAAC,MAAQR,EAAIS,mBAAmB,CAACL,EAAG,mBAAmB,CAACA,EAAG,SAAS,CAACJ,EAAIU,GAAG,kBAAkB,GAAGN,EAAG,sBAAsB,CAACA,EAAG,oBAAoB,CAACJ,EAAIU,GAAG,sBAAsB,IAAI,IAAI,IAAI,IAAI,IAAI,IACljBC,EAAkB,G,2ECoBtB,wCACA,0CACA,WACA,OACA,YACA,GACEC,QAAS,CACP,iBADJ,WACM,IAAN,OACM,EAAN,4BACQ,QAAR,CAAU,cAAV,sDACA,kBACQ,OAAR,gDACQ,IAAR,qEACA,mBACU,EAAV,wBACA,OACU,EAAV,wBACU,EAAV,SAEU,EAAV,QAEQ,OAAR,wCAAU,OAAV,0BACQ,EAAR,MAGI,eAnBJ,SAmBA,GAAM,IAAN,OAAM,OAAN,kJACA,OADA,oBAEA,2BAFA,uBAGA,SACA,qCAJA,SAKA,0BACA,gBACA,0EACA,+BACA,GACA,qBACA,8BACA,qBACA,mBACA,yBAEA,0FAhBA,gDC9CkV,I,iICO9UC,EAAY,eACd,EACAd,EACAY,GACA,EACA,KACA,KACA,MAIa,aAAAE,EAAiB,QAahC,IAAkBA,EAAW,CAACC,QAAA,KAAMC,OAAA,KAAKC,aAAA,KAAWC,QAAA,KAAMC,YAAA,KAAUC,iBAAAC,EAAA,KAAiBC,gBAAA,KAAcC,eAAAF,EAAA,KAAeG,OAAA","file":"static/js/chunk-2d22e165.69c1a6b8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"fill-height\"},[_c('v-row',{attrs:{\"justify\":\"center\",\"align\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',{staticClass:\"mx-auto\",attrs:{\"outlined\":\"\",\"color\":\"primary\",\"max-width\":\"300px\"}},[_c('v-list-item',{attrs:{\"link\":\"\"},on:{\"click\":_vm.openSignInWindow}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"mdi-spotify\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"Connect Spotify\")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container class=\"fill-height\">\r\n    <v-row justify=\"center\" align=\"center\">\r\n      <v-col cols=\"12\">\r\n        <v-card class=\"mx-auto\" outlined color=\"primary\" max-width=\"300px\">\r\n          <v-list-item link @click=\"openSignInWindow\">\r\n            <v-list-item-icon>\r\n              <v-icon>mdi-spotify</v-icon>\r\n            </v-list-item-icon>\r\n            <v-list-item-content>\r\n              <v-list-item-title>Connect Spotify</v-list-item-title>\r\n            </v-list-item-content>\r\n          </v-list-item>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport Axios from \"axios\";\r\nAxios.defaults.xsrfCookieName = 'csrftoken'\r\nAxios.defaults.xsrfHeaderName = 'X-CSRFToken'\r\nlet windowObjectReference = null;\r\nlet previousUrl = null;\r\nlet name = 'Spotify';\r\nexport default {\r\n  methods: {\r\n      openSignInWindow () {\r\n        Axios.get('/spotify/gettoken/', {\r\n          headers: { 'Authorization': ' Token '+this.$store.getters[\"auth/getUserToken\"]}\r\n        }).then((url) => {\r\n          window.removeEventListener('message', this.receiveMessage);\r\n          const strWindowFeatures = 'toolbar=no, menubar=no, width=600, height=700, top=100, left=100';\r\n          if (windowObjectReference === null || windowObjectReference.closed) {\r\n            windowObjectReference = window.open(url.data, name, strWindowFeatures);\r\n          } else if (previousUrl !== url) {\r\n            windowObjectReference = window.open(url.data, name, strWindowFeatures);\r\n            windowObjectReference.focus();\r\n          } else {\r\n            windowObjectReference.focus();\r\n          }\r\n          window.addEventListener('message', event => this.receiveMessage(event), false);\r\n          previousUrl = url;\r\n        });\r\n      },\r\n      async receiveMessage(event) {\r\n        if (event.data) {\r\n          if (event.data.startsWith('?code')) {\r\n            const {data} = event;\r\n            let code = data.split(\"?code=\")[1].split(\"&\")[0]\r\n            await Axios.get('/spotify/auth/', {\r\n              params: {code: code},\r\n              headers: {'Authorization': ' Token ' + this.$store.getters[\"auth/getUserToken\"]}\r\n            }).then(({data}) => {\r\n              const params = {\r\n                \"token\": data.access_token,\r\n                \"refresh_token\": data.refresh_token,\r\n                \"expires\": data.expires_at,\r\n                \"username\": data.user.id,\r\n                \"category\": data.user.product\r\n              };\r\n              this.$store.dispatch(\"spotify/saveData\", params).then(() => this.$router.push('/'));\r\n            });\r\n          }\r\n        }\r\n      }\r\n  },\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Settings.vue?vue&type=template&id=e2213fb0&\"\nimport script from \"./Settings.vue?vue&type=script&lang=js&\"\nexport * from \"./Settings.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemIcon } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCard,VCol,VContainer,VIcon,VListItem,VListItemContent,VListItemIcon,VListItemTitle,VRow})\n"],"sourceRoot":""}